#include <cstdlib>
#include <cstring>
#include <memory>
#include <cstdio>
#include <fstream>
#include <iostream>
#include <cmath>
#include <string>
#include <sstream>
#include <stack>
#include <queue>
#include <vector>
#include <set>
#include <map>
#include <algorithm>
using namespace std;

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/time.h>

#define DEBUG
#ifdef DEBUG
#define DBG(...) cerr << #__VA_ARGS__ << ": " << __VA_ARGS__ << endl
#define DV(...) cerr << __VA_ARGS__ << endl
#define _D(fmt, ...) printf("%10s %3d : " fmt,__FUNCTION__,__LINE__,__VA_ARGS__)
#define _DE(fmt, ...) fprintf(stderr, "%10s %3d : " fmt,__FUNCTION__,__LINE__,__VA_ARGS__)
#else
#define DBG(...)
#define DV(...)
#define _D(fmt, ...)
#define _DE(fmt, ...)
#endif

typedef signed long long ll;
typedef unsigned long long ull;

#define _PE(...) { printf(__VA_ARGS__); fprintf(stderr, __VA_ARGS__); }
#define _E(...) fprintf(stderr, __VA_ARGS__)
#undef _P
#define _P(...) printf(__VA_ARGS__)

#define FOR(x,to) for(x=0;x<to;x++)
#define FOR2(x,from,to) for(x=from;x<to;x++)
#define ZERO(a) memset(a,0,sizeof(a))
void _fill_int(int* p,int val,int rep) {int i;	FOR(i,rep) p[i]=val;}
#define FILL_INT(a,val) _fill_int((int*)a,val,sizeof(a)/4)
#define ZERO2(a,b) memset(a,0,b)
#define MINUS(a) _fill_int((int*)a,-1,sizeof(a)/4)
#define GETs(x) scanf("%s",x);
ll GETi() { ll i;scanf("%lld",&i); return i;}
#define GET1(x) scanf("%d",x);
#define GET2(x,y) scanf("%d%d",x,y);
#define GET3(x,y,z) scanf("%d%d%d",x,y,z);

#define EPS (1e-11)
template <class T> T sqr(T val){ return val*val;}

//-------------------------------------------------------

ll N,M;
ll tab[2][128][3]=
{
{
{16777216,702,1298},
{33554432,1578,585},
{50331648,1493,1829},
{67108864,679,1699},
{83886080,1627,1678},
{100663296,1988,319},
{117440512,1511,1483},
{134217728,280,54},
{150994944,250,679},
{167772160,1527,1917},
{184549376,1978,314},
{201326592,1138,1262},
{218103808,1474,246},
{234881024,530,1401},
{251658240,33,1619},
{268435456,413,1205},
{285212672,1331,1445},
{301989888,1680,1410},
{318767104,296,1546},
{335544320,625,1039},
{352321536,879,1732},
{369098752,1135,1315},
{385875968,140,1391},
{402653184,1646,1161},
{419430400,175,1482},
{436207616,1745,41},
{452984832,95,1220},
{469762048,1033,1260},
{486539264,134,623},
{503316480,94,973},
{520093696,982,1272},
{536870912,312,232},
{553648128,1604,1253},
{570425344,212,330},
{587202560,1533,893},
{603979776,1446,293},
{620756992,1720,1971},
{637534208,1425,1896},
{654311424,94,1009},
{671088640,659,1748},
{687865856,1690,207},
{704643072,817,1281},
{721420288,1512,645},
{738197504,316,1017},
{754974720,216,1816},
{771751936,702,1298},
{788529152,1578,585},
{805306368,1493,1829},
{822083584,679,1699},
{838860800,1627,1678},
{855638016,1988,319},
{872415232,1511,1483},
{889192448,280,54},
{905969664,250,679},
{922746880,1527,1917},
{939524096,1978,314},
{956301312,1138,1262},
{973078528,1474,246},
{989855744,530,1401},
{1006632960,33,1619},
{1023410176,413,1205},
{1040187392,1331,1445},
{1056964608,1680,1410},
{1073741824,296,1546},
{1090519040,625,1039},
{1107296256,879,1732},
{1124073472,1135,1315},
{1140850688,140,1391},
{1157627904,1646,1161},
{1174405120,175,1482},
{1191182336,1745,41},
{1207959552,95,1220},
{1224736768,1033,1260},
{1241513984,134,623},
{1258291200,94,973},
{1275068416,982,1272},
{1291845632,312,232},
{1308622848,1604,1253},
{1325400064,212,330},
{1342177280,1533,893},
{1358954496,1446,293},
{1375731712,1720,1971},
{1392508928,1425,1896},
{1409286144,94,1009},
{1426063360,659,1748},
{1442840576,1690,207},
{1459617792,817,1281},
{1476395008,1512,645},
{1493172224,316,1017},
{1509949440,216,1816},
{1526726656,702,1298},
{1543503872,1578,585},
{1560281088,1493,1829},
{1577058304,679,1699},
{1593835520,1627,1678},
{1610612736,1988,319},
{1627389952,1511,1483},
{1644167168,280,54},
{1660944384,250,679},
{1677721600,1527,1917},
{1694498816,1978,314},
{1711276032,1138,1262},
{1728053248,1474,246},
{1744830464,530,1401},
{1761607680,33,1619},
{1778384896,413,1205},
{1795162112,1331,1445},
{1811939328,1680,1410},
{1828716544,296,1546},
{1845493760,625,1039},
{1862270976,879,1732},
{1879048192,1135,1315},
{1895825408,140,1391},
{1912602624,1646,1161},
{1929379840,175,1482},
{1946157056,1745,41},
{1962934272,95,1220},
{1979711488,1033,1260},
{1996488704,134,623},
{2013265920,94,973},
{2030043136,982,1272},
{2046820352,312,232},
{2063597568,1604,1253},
{2080374784,212,330},
{2097152000,1533,893},
{2113929216,1446,293},
{2130706432,1720,1971},
},
{
{16777216,44434072,433204601},
{33554432,881904762,793484513},
{50331648,313385492,654121165},
{67108864,141705650,719416030},
{83886080,353416984,435056579},
{100663296,150609980,750426619},
{117440512,266455557,600694804},
{134217728,305932372,470488080},
{150994944,537104296,543892032},
{167772160,953782087,783798288},
{184549376,47824887,782711457},
{201326592,236627608,242320623},
{218103808,785290862,154645949},
{234881024,146226709,580063518},
{251658240,805329301,912115398},
{268435456,389373101,221290429},
{285212672,317412992,285553234},
{301989888,161134536,93405896},
{318767104,404406264,80593116},
{335544320,793226142,481335259},
{352321536,625770179,672276201},
{369098752,861557162,867643899},
{385875968,321030116,574784816},
{402653184,478731635,204626762},
{419430400,336164283,675112310},
{436207616,755273520,766603453},
{452984832,404545566,458433577},
{469762048,307525725,267059589},
{486539264,139612185,690574210},
{503316480,158710973,214364907},
{520093696,146890476,670425968},
{536870912,929067786,978911694},
{553648128,127715644,730897945},
{570425344,372773783,849234043},
{587202560,383827541,544764224},
{603979776,310659639,539635069},
{620756992,848434816,751911857},
{637534208,106650932,953201160},
{654311424,237354018,826992970},
{671088640,448417280,631852835},
{687865856,640404223,689195443},
{704643072,929716587,696662671},
{721420288,603318965,927046170},
{738197504,627052337,917078024},
{754974720,593658858,377990599},
{771751936,485397202,713241162},
{788529152,678637551,997974174},
{805306368,722247342,564628545},
{822083584,787772000,566290359},
{838860800,576535449,396447327},
{855638016,773122154,657749451},
{872415232,397608991,301896604},
{889192448,476082155,427674973},
{905969664,827359311,796287310},
{922746880,606941111,761851396},
{939524096,185697275,713004187},
{956301312,995946369,761482180},
{973078528,820947926,262816441},
{989855744,171966811,375885569},
{1006632960,951597958,44639746},
{1023410176,143176784,318791604},
{1040187392,558123850,15787141},
{1056964608,323921472,564294189},
{1073741824,796876184,646098571},
{1090519040,556685323,900105877},
{1107296256,711822837,179513882},
{1124073472,469779255,855273414},
{1140850688,217239082,128705371},
{1157627904,935476607,38707758},
{1174405120,990104006,264868141},
{1191182336,370657101,68236027},
{1207959552,855892830,402774351},
{1224736768,527014363,696010},
{1241513984,909385956,743339414},
{1258291200,283697604,157005811},
{1275068416,233306321,451297316},
{1291845632,872477216,807749500},
{1308622848,870289276,812929326},
{1325400064,325228277,570025797},
{1342177280,481777367,865613752},
{1358954496,919541863,386141540},
{1375731712,778588410,496477417},
{1392508928,219203606,644006853},
{1409286144,184783735,418479674},
{1426063360,629422116,664299018},
{1442840576,716040481,503528499},
{1459617792,697288641,715852918},
{1476395008,273505665,324305067},
{1493172224,215196674,564755497},
{1509949440,119945340,718024455},
{1526726656,493289273,864117502},
{1543503872,654071216,59047044},
{1560281088,151857839,136290882},
{1577058304,232254116,351274449},
{1593835520,146399083,926998352},
{1610612736,499749219,122522094},
{1627389952,476920562,429167579},
{1644167168,171673673,956473666},
{1660944384,551531305,894391887},
{1677721600,350798539,522474704},
{1694498816,646761113,810516653},
{1711276032,654518322,915776283},
{1728053248,42589852,821383052},
{1744830464,544482447,571789743},
{1761607680,63031269,838066168},
{1778384896,481530560,858816113},
{1795162112,407904369,473978544},
{1811939328,744386121,661549931},
{1828716544,608224573,492228970},
{1845493760,371903815,532144418},
{1862270976,57773668,235563018},
{1879048192,454776942,265064958},
{1895825408,117330523,688325543},
{1912602624,715398037,338304479},
{1929379840,41860698,320888247},
{1946157056,57569204,94332538},
{1962934272,628042925,153872752},
{1979711488,360383675,494043542},
{1996488704,254150889,410855126},
{2013265920,796526081,258908041},
{2030043136,456778153,688714828},
{2046820352,584423222,366682118},
{2063597568,447611379,470158850},
{2080374784,803525550,647285518},
{2097152000,621852813,337164962},
{2113929216,162135320,316906385},
{2130706432,388073006,600892915},
}};

void gen(){
	int loop;
	ll a,b,c,I,M;
	
	FOR(i,loop) {
		M=(i==0)?1999:1000000007;
	
		a=0;
		b=1;
		for(I=1;I<1LL<<31;I++) {
			if((I&0xffffff)==0) _P("{%lld,%lld,%lld},\n",I,a,b);
			c=(a*a+b*b)%M;
			a=b;
			b=c;
		}
	}
	return;
}

void solve() {
	int x,y,i,j,p,rr,TM,TTC,id;
	ll a,b,c,I,ret;
	
	//gen();
	N=GETi();
	M=GETi();
	
	id=(M==1999)?0:1;
	ret=a=0;b=1;I=1;
	FOR(i,127) if(N>=tab[id][i][0]) {
			a=tab[id][i][1];
			b=tab[id][i][2];
			I=tab[id][i][0];
	}
	
	for(;I<=N;I++) {
		ret=a;
		c=(a*a+b*b)%M;
		a=b;
		b=c;
	}
	
	_P("%lld\n",ret);
	return;
}

int main(int argc,char** argv){
	long long span;
	struct timeval start,end,ts;
	
	if(argc>1) {
		freopen(argv[1], "r", stdin);
	}
	
	gettimeofday(&start,NULL);
	solve();
	gettimeofday(&end,NULL);
	
	span = (end.tv_sec - start.tv_sec)*1000000LL + (end.tv_usec - start.tv_usec);
	//_E("**Total time: %lld ms\n",span/1000);
	
	return 0;
	
}

